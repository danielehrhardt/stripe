{"version":3,"file":"plugin.js","sources":["esm/types/googlepay/enum.js","esm/types/token/enum.js","esm/types/shared/enum.js","esm/index.js","esm/helper.js","esm/web.js"],"sourcesContent":["export var GooglePayCheckoutOption;\n(function (GooglePayCheckoutOption) {\n    /**\n     * Standard text applies for the given totalPriceStatus (default).\n     */\n    GooglePayCheckoutOption[\"DEFAULT\"] = \"DEFAULT\";\n    /**\n     * The selected payment method is charged immediately after the payer confirms their selections.\n     * This option is only available when `totalPriceStatus` is set to `FINAL`.\n     */\n    GooglePayCheckoutOption[\"COMPLETE_IMMEDIATE_PURCHASE\"] = \"COMPLETE_IMMEDIATE_PURCHASE\";\n})(GooglePayCheckoutOption || (GooglePayCheckoutOption = {}));\nexport var GooglePayBillingAddressFormat;\n(function (GooglePayBillingAddressFormat) {\n    /**\n     * Name, country code, and postal code (default).\n     */\n    GooglePayBillingAddressFormat[\"MIN\"] = \"MIN\";\n    /**\n     *  Name, street address, locality, region, country code, and postal code.\n     */\n    GooglePayBillingAddressFormat[\"FULL\"] = \"FULL\";\n})(GooglePayBillingAddressFormat || (GooglePayBillingAddressFormat = {}));\nexport var GooglePayAuthMethod;\n(function (GooglePayAuthMethod) {\n    /**\n     * This authentication method is associated with payment cards stored on file with the user's Google Account.\n     * Returned payment data includes personal account number (PAN) with the expiration month and the expiration year.\n     */\n    GooglePayAuthMethod[\"PAN_ONLY\"] = \"PAN_ONLY\";\n    /**\n     * This authentication method is associated with cards stored as Android device tokens.\n     * Returned payment data includes a 3-D Secure (3DS) cryptogram generated on the device.\n     */\n    GooglePayAuthMethod[\"CRYPTOGRAM_3DS\"] = \"CRYPTOGRAM_3DS\";\n})(GooglePayAuthMethod || (GooglePayAuthMethod = {}));\nexport var GooglePayPriceStatus;\n(function (GooglePayPriceStatus) {\n    /**\n     * Used for a capability check. Do not use this property if the transaction is processed in an EEA country.\n     */\n    GooglePayPriceStatus[\"NOT_CURRENTLY_KNOWN\"] = \"NOT_CURRENTLY_KNOWN\";\n    /**\n     * Total price may adjust based on the details of the response, such as sales tax collected based on a billing address.\n     */\n    GooglePayPriceStatus[\"ESTIMATED\"] = \"ESTIMATED\";\n    /**\n     * Total price doesn't change from the amount presented to the shopper.\n     */\n    GooglePayPriceStatus[\"FINAL\"] = \"FINAL\";\n})(GooglePayPriceStatus || (GooglePayPriceStatus = {}));\n//# sourceMappingURL=enum.js.map","export var SourceType;\n(function (SourceType) {\n    SourceType[\"ThreeDeeSecure\"] = \"3ds\";\n    SourceType[\"GiroPay\"] = \"giropay\";\n    SourceType[\"iDEAL\"] = \"ideal\";\n    SourceType[\"SEPADebit\"] = \"sepadebit\";\n    SourceType[\"Sofort\"] = \"sofort\";\n    SourceType[\"AliPay\"] = \"alipay\";\n    SourceType[\"AliPayReusable\"] = \"alipayreusable\";\n    SourceType[\"P24\"] = \"p24\";\n    SourceType[\"VisaCheckout\"] = \"visacheckout\";\n})(SourceType || (SourceType = {}));\n//# sourceMappingURL=enum.js.map","export var CardBrand;\n(function (CardBrand) {\n    CardBrand[\"AMERICAN_EXPRESS\"] = \"American Express\";\n    CardBrand[\"DISCOVER\"] = \"Discover\";\n    CardBrand[\"JCB\"] = \"JCB\";\n    CardBrand[\"DINERS_CLUB\"] = \"Diners Club\";\n    CardBrand[\"VISA\"] = \"Visa\";\n    CardBrand[\"MASTERCARD\"] = \"MasterCard\";\n    CardBrand[\"UNIONPAY\"] = \"UnionPay\";\n    CardBrand[\"UNKNOWN\"] = \"Unknown\";\n})(CardBrand || (CardBrand = {}));\n//# sourceMappingURL=enum.js.map","import { registerPlugin } from '@capacitor/core';\nconst Stripe = registerPlugin('Stripe', {\n    web: () => import('./web').then(m => new m.StripeWeb()),\n});\nexport * from './definitions';\nexport { Stripe };\n//# sourceMappingURL=index.js.map","export function flatten(json, prefix, omit) {\n    let obj = {};\n    for (const prop of Object.keys(json)) {\n        if (typeof json[prop] !== 'undefined' &&\n            json[prop] !== null &&\n            (!Array.isArray(omit) || !omit.includes(prop))) {\n            if (typeof json[prop] === 'object') {\n                obj = Object.assign(Object.assign({}, obj), flatten(json[prop], prefix ? `${prefix}[${prop}]` : prop));\n            }\n            else {\n                const key = prefix ? `${prefix}[${prop}]` : prop;\n                obj[key] = json[prop];\n            }\n        }\n    }\n    return obj;\n}\nexport function stringify(json) {\n    let str = '';\n    json = flatten(json);\n    for (const prop of Object.keys(json)) {\n        const key = encodeURIComponent(prop);\n        const val = encodeURIComponent(json[prop]);\n        str += `${key}=${val}&`;\n    }\n    return str;\n}\nexport function formBody(json, prefix, omit) {\n    json = flatten(json, prefix, omit);\n    return stringify(json);\n}\nexport async function _callStripeAPI(fetchUrl, fetchOpts) {\n    var _a;\n    const res = await fetch(fetchUrl, fetchOpts);\n    let parsed;\n    try {\n        parsed = await res.json();\n    }\n    catch (e) {\n        parsed = await res.text();\n    }\n    if (res.ok) {\n        return parsed;\n    }\n    else {\n        throw ((_a = parsed === null || parsed === void 0 ? void 0 : parsed.error) === null || _a === void 0 ? void 0 : _a.message) ? parsed.error.message : parsed;\n    }\n}\nexport async function _stripePost(path, body, key, extraHeaders) {\n    extraHeaders = extraHeaders || {};\n    return _callStripeAPI(`https://api.stripe.com${path}`, {\n        body: body,\n        method: 'POST',\n        headers: Object.assign({ 'Content-Type': 'application/x-www-form-urlencoded', 'Accept': 'application/json', 'Authorization': `Bearer ${key}`, 'Stripe-version': '2020-03-02' }, extraHeaders),\n    });\n}\nexport async function _stripeGet(path, key, extraHeaders) {\n    extraHeaders = extraHeaders || {};\n    return _callStripeAPI(`https://api.stripe.com${path}`, {\n        method: 'GET',\n        headers: Object.assign({ 'Accept': 'application/json', 'Authorization': `Bearer ${key}`, 'Stripe-version': '2020-03-02' }, extraHeaders),\n    });\n}\n//# sourceMappingURL=helper.js.map","import { WebPlugin } from '@capacitor/core';\nimport { CardBrand } from './definitions';\nimport { formBody, _stripePost, _stripeGet } from './helper';\nexport class StripeWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'Stripe',\n            platforms: ['web'],\n        });\n    }\n    async setPublishableKey(opts) {\n        if (typeof opts.key !== 'string' || opts.key.trim().length === 0) {\n            throw new Error('you must provide a valid key');\n        }\n        const scriptEl = document.createElement('script');\n        scriptEl.src = 'https://js.stripe.com/v3/';\n        document.body.appendChild(scriptEl);\n        this.publishableKey = opts.key;\n        return new Promise((resolve, reject) => {\n            scriptEl.addEventListener('error', (ev) => {\n                document.body.removeChild(scriptEl);\n                reject('Failed to load Stripe JS: ' + ev.message);\n            }, { once: true });\n            scriptEl.addEventListener('load', () => {\n                try {\n                    this.stripe = new window.Stripe(opts.key);\n                    resolve();\n                }\n                catch (err) {\n                    document.body.removeChild(scriptEl);\n                    reject(err);\n                }\n            }, { once: true });\n        });\n    }\n    async createCardToken(card) {\n        if (this.publishableKey === undefined) {\n            throw 'publishableKey is undefined';\n        }\n        const body = formBody(card, 'card', ['phone', 'email']);\n        return _stripePost('/v1/tokens', body, this.publishableKey);\n    }\n    async createBankAccountToken(bankAccount) {\n        if (this.publishableKey === undefined) {\n            throw 'publishableKey is undefined';\n        }\n        const body = formBody(bankAccount, 'bank_account');\n        return _stripePost('/v1/tokens', body, this.publishableKey);\n    }\n    async confirmPaymentIntent(opts) {\n        if (this.stripe === undefined) {\n            throw 'Stripe is undefined';\n        }\n        if (opts.applePayOptions) {\n            throw 'Apple Pay is not supported on web';\n        }\n        if (opts.googlePayOptions) {\n            throw 'Google Pay is not supported on web';\n        }\n        if (!opts.clientSecret) {\n            return Promise.reject('you must provide a client secret');\n        }\n        let confirmOpts;\n        if (opts.paymentMethodId) {\n            confirmOpts = {\n                payment_method: opts.paymentMethodId,\n            };\n        }\n        else if (opts.card) {\n            const token = await this.createCardToken(opts.card);\n            confirmOpts = {\n                save_payment_method: opts.saveMethod,\n                setup_future_usage: opts.setupFutureUsage,\n                payment_method: {\n                    billing_details: {\n                        email: opts.card.email,\n                        name: opts.card.name,\n                        phone: opts.card.phone,\n                        address: {\n                            line1: opts.card.address_line1,\n                            line2: opts.card.address_line2,\n                            city: opts.card.address_city,\n                            state: opts.card.address_state,\n                            country: opts.card.address_country,\n                            postal_code: opts.card.address_zip,\n                        },\n                    },\n                    card: {\n                        token: token.id,\n                    },\n                },\n            };\n        }\n        return this.stripe\n            .confirmCardPayment(opts.clientSecret, confirmOpts)\n            .then(response => response.paymentIntent || {});\n    }\n    async confirmSetupIntent(opts) {\n        if (!opts.clientSecret) {\n            return Promise.reject('you must provide a client secret');\n        }\n        return Promise.reject('Not supported on web');\n    }\n    async payWithApplePay(options) {\n        console.log(options);\n        throw 'Apple Pay is not supported on web';\n    }\n    async cancelApplePay() {\n        throw 'Apple Pay is not supported on web';\n    }\n    async finalizeApplePayTransaction(options) {\n        console.log(options);\n        throw 'Apple Pay is not supported on web';\n    }\n    async payWithGooglePay(options) {\n        console.log(options);\n        throw 'Google Pay is not supported on web';\n    }\n    async createSourceToken(options) {\n        console.log(options);\n        throw 'Not implemented';\n    }\n    async createPiiToken(options) {\n        if (this.publishableKey === undefined) {\n            throw 'publishableKey is undefined';\n        }\n        const body = formBody({ id_number: options.pii }, 'pii');\n        return _stripePost('/v1/tokens', body, this.publishableKey);\n    }\n    async createAccountToken(account) {\n        if (this.publishableKey === undefined) {\n            return Promise.reject('publishableKey is undefined');\n        }\n        if (!account.legalEntity) {\n            return Promise.reject('you must provide a legal entity');\n        }\n        const body = {};\n        if (account.legalEntity.type === 'individual') {\n            body.business_type = 'individual';\n            body.individual = account.legalEntity;\n            body.tos_shown_and_accepted = account.tosShownAndAccepted;\n        }\n        else {\n            body.business_type = 'company';\n            body.company = account.legalEntity;\n        }\n        delete account.legalEntity.type;\n        return _stripePost('/v1/tokens', formBody({ account: body }), this.publishableKey);\n    }\n    async customizePaymentAuthUI(options) {\n        console.log(options);\n        return;\n    }\n    async presentPaymentOptions() {\n        return {};\n    }\n    async isApplePayAvailable() {\n        return { available: false };\n    }\n    async isGooglePayAvailable() {\n        return { available: false };\n    }\n    async validateCardNumber(opts) {\n        return {\n            valid: opts.number.length > 0,\n        };\n    }\n    async validateExpiryDate(opts) {\n        const { exp_month } = opts;\n        let { exp_year } = opts;\n        if (exp_month < 1 || exp_month > 12) {\n            return {\n                valid: false,\n            };\n        }\n        if (String(exp_year).length === 2) {\n            exp_year = parseInt('20' + String(exp_year));\n        }\n        const currentYear = new Date().getFullYear();\n        if (exp_year > currentYear) {\n            return {\n                valid: true,\n            };\n        }\n        else if (exp_year === currentYear &&\n            exp_month >= new Date().getMonth() + 1) {\n            return {\n                valid: true,\n            };\n        }\n        else {\n            return {\n                valid: false,\n            };\n        }\n    }\n    async validateCVC(opts) {\n        if (typeof opts.cvc !== 'string') {\n            return { valid: false };\n        }\n        const len = opts.cvc.trim().length;\n        return {\n            valid: len > 0 && len < 4,\n        };\n    }\n    async identifyCardBrand(opts) {\n        console.log(opts);\n        return {\n            brand: CardBrand.UNKNOWN,\n        };\n    }\n    addCustomerSource(opts) {\n        if (this.cs === undefined) {\n            throw 'CustomerSession is undefined';\n        }\n        return this.cs.addSrc(opts.sourceId);\n    }\n    customerPaymentMethods() {\n        if (this.cs === undefined) {\n            throw 'CustomerSession is undefined';\n        }\n        return this.cs.listPm();\n    }\n    deleteCustomerSource(opts) {\n        console.log(opts);\n        return new Promise(resolve => {\n            resolve({\n                paymentMethods: [],\n            });\n        });\n    }\n    async initCustomerSession(opts) {\n        this.cs = new CustomerSession(opts);\n    }\n    setCustomerDefaultSource(opts) {\n        if (this.cs === undefined) {\n            throw 'CustomerSession is undefined';\n        }\n        return this.cs.setDefaultSrc(opts.sourceId);\n    }\n}\nclass CustomerSession {\n    constructor(key) {\n        this.key = key;\n        if (!key.secret ||\n            !Array.isArray(key.associated_objects) ||\n            !key.associated_objects.length ||\n            !key.associated_objects[0].id) {\n            throw new Error('you must provide a valid configuration');\n        }\n        this.customerId = key.associated_objects[0].id;\n    }\n    async listPm() {\n        const res = await _stripeGet(`/v1/customers/${this.customerId}`, this.key.secret);\n        return {\n            paymentMethods: res.sources.data,\n        };\n    }\n    async addSrc(id) {\n        await _stripePost('/v1/customers/' + this.customerId, formBody({\n            source: id,\n        }), this.key.secret);\n        return this.listPm();\n    }\n    async setDefaultSrc(id) {\n        await _stripePost('/v1/customers/' + this.customerId, formBody({\n            default_source: id,\n        }), this.key.secret);\n        return await this.listPm();\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["GooglePayCheckoutOption","GooglePayBillingAddressFormat","GooglePayAuthMethod","GooglePayPriceStatus","SourceType","CardBrand","registerPlugin","WebPlugin"],"mappings":"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"}